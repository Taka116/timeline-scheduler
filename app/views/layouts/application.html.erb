<!DOCTYPE html>
<html>
  <head>
    <title>Jikanwari</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= favicon_link_tag 'app_logo.png' %>
    <%= Gon::Base.render_data %>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>
    <div class="container">
        <nav class="navbar navbar-inverse">
          <div class="container-fluid">
            <div class="navbar-header">
              <%= link_to "Timeline Scheduler", user_path(@user), class: "active navbar-brand" %>
            </div>
            <ul class="nav navbar-nav">
              <!--<li class="active"><a href="#">Home</a></li>-->
              <li><a href="#">Home</a></li>
              <li class='dropdown'>
                <a href='#' class='dropdown-toggle' data-toggle='dropdown'>
                  Course List <span class='caret'></span>
                </a>
                <ul class='dropdown-menu'>
                  <li>
                    <%= link_to "Mon", user_univ_classes_path(@user, :day => '月') %>
                  </li>
                  <li class='divider'></li>
                  <li>
                    <%= link_to "Tues", user_univ_classes_path(@user, :day => '火') %>
                  </li>
                  <li class='divider'></li>
                  <li>
                    <%= link_to "Wed", user_univ_classes_path(@user, :day => '水') %>
                  </li>
                  <li class='divider'></li>
                  <li>
                    <%= link_to "Thurs", user_univ_classes_path(@user, :day => '木') %>
                  </li>
                  <li class='divider'></li>
                  <li>
                    <%= link_to "Fri", user_univ_classes_path(@user, :day => '金') %>
                  </li>
                </ul>
              </li>
            </ul>
            <form class="navbar-form navbar-left" action="/action_page.php">
              <div class="form-group">
                <%= select_tag 'searchDropdownBox', options_for_select(UnivClass.all.map(&:subject_name)), class: "searchable", include_blank: "Search By Subject Name" %>
              </div>
              <input type="button" onclick='"#"' value="Submit" class="btn btn-info" id="search-by-subject-button"/>
            </form>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="#"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
              <li><a href="#"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
            </ul>
          </div>
        </nav>
        <% flash.each do |key, value| %>
          <div class="alert alert-<%= key %> alert-dismissible">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
            <%= value %>
          </div>
        <% end %>
      <%= yield %>
    </div>
    
    <style>
      .navbar {
        right: 75px;
        width: 1290px;
      }
    </style>
    
    <script>
      $(function() {
        return $(".searchable").select2({
          width: 400
        });
      });
      
      $('#searchDropdownBox').on('select2:select', function (e) {
          var data = e.params.data;
          document.getElementById("search-by-subject-button").attributes[1].value = `window.location="/users/<%= @user.id %>/univ_classes/search?subject_name=${data.text}"`;
          console.log(document.getElementById("search-by-subject-button").attributes[1].value);
      });

    </script>
  </body>
</html>
